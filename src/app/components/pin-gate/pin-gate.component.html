<div class="pin-gate">
  <div class="scroll-container">
    <h1 class="title">Gib den Geheimcode ein</h1>

    <div class="pin-display" [class.shake]="shake()" [class.error]="error()">
      @for (i of pinDots; track i) {
        <span class="pin-dot" [class.filled]="pin().length > i"></span>
      }
    </div>

    @if (error()) {
      <p class="error-message">{{ errorMessage() }}</p>
    }

    @if (isLoading) {
      <p class="loading-message">Wird 端berpr端ft...</p>
    }

    <div class="keypad">
      @for (digit of ['1', '2', '3', '4', '5', '6', '7', '8', '9']; track digit) {
        <button
          class="key"
          (click)="onDigitClick(digit)"
          [disabled]="pin().length >= PIN_LENGTH || isLoading"
        >
          {{ digit }}
        </button>
      }
      <button class="key key-action" (click)="onClear()" [disabled]="isLoading">C</button>
      <button
        class="key"
        (click)="onDigitClick('0')"
        [disabled]="pin().length >= PIN_LENGTH || isLoading"
      >
        0
      </button>
      <button class="key key-action" (click)="onBackspace()" [disabled]="isLoading">&larr;</button>
    </div>

    <button
      class="enter-btn"
      [disabled]="pin().length !== PIN_LENGTH || isLoading"
      (click)="onSubmit()"
    >
      @if (isLoading) {
        Wird 端berpr端ft...
      } @else {
        Abenteuer starten
      }
    </button>
  </div>
</div>
